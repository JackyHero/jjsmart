/*!
 * jSmart Javascript template engine (v2.15.1)
 * https://github.com/umakantp/jsmart
 * http://opensource.org/licenses/LGPL-3.0
 *
 * Copyright 2011-2015, Max Miroshnikov <miroshnikov at gmail dot com>
 *                      Umakant Patil <me @ umakantpatil dot com>
 */

!function(){function obMerge(e,r){for(var t=1;t<arguments.length;++t)for(var a in arguments[t])e[a]=arguments[t][a];return e}function countProperties(e){var r=0;for(var t in e)e.hasOwnProperty(t)&&r++;return r}function findInArray(e,r){if(Array.prototype.indexOf)return e.indexOf(r);for(var t=0;t<e.length;++t)if(e[t]===r)return t;return-1}function evalString(e){return e.replace(/\\t/,"\t").replace(/\\n/,"\n").replace(/\\(['"\\])/g,"$1")}function trimQuotes(e){return evalString(e.replace(/^['"](.*)['"]$/,"$1")).replace(/^\s+|\s+$/g,"")}function findTag(e,r){for(var t=0,a=0,n=jSmart.prototype.left_delimiter,s=jSmart.prototype.right_delimiter,i=jSmart.prototype.auto_literal,o=/^\s*(.+)\s*$/i,p=e?new RegExp("^\\s*("+e+")\\s*$","i"):o,l=0;l<r.length;++l)if(r.substr(l,n.length)==n){if(i&&l+1<r.length&&r.substr(l+1,1).match(/\s/))continue;t||(r=r.slice(l),a+=parseInt(l),l=0),++t}else if(r.substr(l,s.length)==s){if(i&&l-1>=0&&r.substr(l-1,1).match(/\s/))continue;if(!--t){var c=r.slice(n.length,l).replace(/[\r\n]/g," ").match(p);if(c)return c.index=a,c[0]=r.slice(0,l+s.length),c}t<0&&(t=0)}return null}function findCloseTag(e,r,t){var a="",n=null,s=null,i=0;do{if(n&&(i+=n[0].length),!(n=findTag(e,t)))throw new Error("Unclosed {"+r+"}");a+=t.slice(0,n.index),i+=n.index,t=t.slice(n.index+n[0].length),(s=findTag(r,a))&&(a=a.slice(s.index+s[0].length))}while(s);return n.index=i,n}function findElseTag(e,r,t,a){for(var n=0,s=findTag(t,a);s;s=findTag(t,a)){var i=findTag(e,a);if(!i||i.index>s.index)return s.index+=n,s;a=a.slice(i.index+i[0].length),n+=i.index+i[0].length;var o=findCloseTag(r,e,a);a=a.slice(o.index+o[0].length),n+=o.index+o[0].length}return null}function execute(code,data){if("string"==typeof code)with({__code:code})with(modifiers)with(data)try{return eval(__code)}catch(e){throw new Error(e.message+" in \n"+code)}return code}function executeByFuncObject(e,r){try{return e.apply(this,r)}catch(e){throw new Error(e.message)}}function assignVar(e,r,t){e.match(/\[\]$/)?t[e.replace(/\[\]$/,"")].push(r):t[e]=r}function parse(e,r){for(var t=findTag("",e);t;t=findTag("",e)){t.index&&parseText(e.slice(0,t.index),r),e=e.slice(t.index+t[0].length);var a=t[1].match(/^\s*(\w+)(.*)$/);if(a){var n=a[1],s=a.length>2?a[2].replace(/^\s+|\s+$/g,""):"";if(n in buildInFunctions){var i=buildInFunctions[n],o=("parseParams"in i?i.parseParams:parseParams)(s);if("block"==i.type){l=findCloseTag("/"+n,n+" +[^}]*",e=e.replace(/^\n/,""));i.parse(o,r,e.slice(0,l.index)),e=e.slice(l.index+l[0].length)}else i.parse(o,r),"extends"==n&&(r=[]);e=e.replace(/^\n/,"")}else if(n in plugins){var p=plugins[n];if("block"==p.type){var l=findCloseTag("/"+n,n+" +[^}]*",e);parsePluginBlock(n,parseParams(s),r,e.slice(0,l.index)),e=e.slice(l.index+l[0].length)}else"function"==p.type&&parsePluginFunc(n,parseParams(s),r);"append"!=n&&"assign"!=n&&"capture"!=n&&"eval"!=n&&"include"!=n||(e=e.replace(/^\n/,""))}else buildInFunctions.expression.parse(t[1],r)}else{var c=buildInFunctions.expression.parse(t[1],r);"build-in"==c.type&&"operator"==c.name&&"="==c.op&&(e=e.replace(/^\n/,""))}}return e&&parseText(e,r),r}function parseText(e,r){if(parseText.parseEmbeddedVars)for(var t=/([$][\w@]+)|`([^`]*)`/,a=t.exec(e);a;a=t.exec(e))r.push({type:"text",data:e.slice(0,a.index)}),r.push(parseExpression(a[1]?a[1]:a[2]).tree),e=e.slice(a.index+a[0].length);return r.push({type:"text",data:e}),r}function parseFunc(e,r,t){return r.__parsed.name=parseText(e,[])[0],t.push({type:"plugin",name:"__func",params:r}),t}function parseOperator(e,r,t,a){a.push({type:"build-in",name:"operator",op:e,optype:r,precedence:t,params:{}})}function parseVar(e,r,t){for(var a=r.token,n=[{type:"text",data:t.replace(/^(\w+)@(key|index|iteration|first|last|show|total)/gi,"$1__$2")}],s=/^(?:\.|\s*->\s*|\[\s*)/,i=e.match(s);i;i=e.match(s)){r.token+=i[0],e=e.slice(i[0].length);var o={value:"",tree:[]};if(i[0].match(/\[/)){(o=parseExpression(e))&&(r.token+=o.value,n.push(o.tree),e=e.slice(o.value.length));var p=e.match(/\s*\]/);p&&(r.token+=p[0],e=e.slice(p[0].length))}else{var l=parseModifiers.stop;if(parseModifiers.stop=!0,lookUp(e,o)){r.token+=o.value;var c=o.tree[0];"plugin"==c.type&&"__func"==c.name&&(c.hasOwner=!0),n.push(c),e=e.slice(o.value.length)}else o=!1;parseModifiers.stop=l}o||n.push({type:"text",data:""})}return r.tree.push({type:"var",parts:n}),r.value+=r.token.substr(a.length),onParseVar(r.token),e}function onParseVar(e){}function parseModifiers(e,r){if(!parseModifiers.stop){var t=e.match(/^\|(\w+)/);if(t){r.value+=t[0];var a="default"==t[1]?"defaultValue":t[1];e=e.slice(t[0].length).replace(/^\s+/,""),parseModifiers.stop=!0;for(var n=[],s=e.match(/^\s*:\s*/);s;s=e.match(/^\s*:\s*/)){r.value+=e.slice(0,s[0].length);var i={value:"",tree:[]};lookUp(e=e.slice(s[0].length),i)?(r.value+=i.value,n.push(i.tree[0]),e=e.slice(i.value.length)):parseText("",n)}parseModifiers.stop=!1,n.unshift(r.tree.pop()),r.tree.push(parseFunc(a,{__parsed:n},[])[0]),parseModifiers(e,r)}}}function lookUp(e,r){if(!e)return!1;if(e.substr(0,jSmart.prototype.left_delimiter.length)==jSmart.prototype.left_delimiter){var t=findTag("",e);if(t)return r.token=t[0],r.value+=t[0],parse(t[0],r.tree),parseModifiers(e.slice(r.value.length),r),!0}for(var a=0;a<tokens.length;++a)if(e.match(tokens[a].re))return r.token=RegExp.lastMatch,r.value+=RegExp.lastMatch,tokens[a].parse(r,e.slice(r.token.length)),!0;return!1}function bundleOp(e,r,t){var a=r[e];if("operator"==a.name&&a.precedence==t&&!a.params.__parsed){if("binary"==a.optype)return a.params.__parsed=[r[e-1],r[e+1]],r.splice(e-1,3,a),!0;if("post-unary"==a.optype)return a.params.__parsed=[r[e-1]],r.splice(e-1,2,a),!0;a.params.__parsed=[r[e+1]],r.splice(e,2,a)}return!1}function composeExpression(e){var r=0;for(r=0;r<e.length;++r)e[r]instanceof Array&&(e[r]=composeExpression(e[r]));for(var t=1;t<14;++t)if(2==t||10==t)for(r=e.length;r>0;--r)r-=bundleOp(r-1,e,t);else for(r=0;r<e.length;++r)r-=bundleOp(r,e,t);return e[0]}function parseExpression(e){for(var r={value:"",tree:[]};lookUp(e.slice(r.value.length),r););return!!r.tree.length&&(r.tree=composeExpression(r.tree),r)}function parseParams(e,r,t){var a=e.replace(/\n/g," ").replace(/^\s+|\s+$/g,""),n=[];n.__parsed=[];var e="";if(!a)return n;for(r||(r=/^\s+/,t=/^(\w+)\s*=\s*/);a;){var s=null;if(t){var i=a.match(t);if(i){var o=!!i[1].charAt(0).match(/^\d+/);"true"!=i[1]&&"false"!=i[1]&&"null"!=i[1]||(o=!0),o||(s=trimQuotes(i[1]),e+=a.slice(0,i[0].length),a=a.slice(i[0].length))}}var p=parseExpression(a);if(!p)break;s?(n[s]=p.value,n.__parsed[s]=p.tree):(n.push(p.value),n.__parsed.push(p.tree)),e+=a.slice(0,p.value.length);var l=(a=a.slice(p.value.length)).match(r);if(!l)break;e+=a.slice(0,l[0].length),a=a.slice(l[0].length)}return n.toString=function(){return e},n}function parsePluginBlock(e,r,t,a){t.push({type:"plugin",name:e,params:r,subTree:parse(a,[])})}function parsePluginFunc(e,r,t){t.push({type:"plugin",name:e,params:r})}function getActualParamValues(e,r){var t=[];for(var a in e.__parsed)if(e.__parsed.hasOwnProperty(a)){var n=process([e.__parsed[a]],r);t[a]=n}return t.__get=function(e,r,a){if(e in t&&void 0!==t[e])return t[e];if(void 0!==a&&void 0!==t[a])return t[a];if(null===r)throw new Error("The required attribute '"+e+"' is missing");return r},t}function isEmptyObject(e){for(var r in e)if(e.hasOwnProperty(r))return!1;return!0}function getVarValue(e,r,t){for(var a=r,n="",s=0;s<e.parts.length;++s){var i=e.parts[s];if("plugin"==i.type&&"__func"==i.name&&i.hasOwner)r.__owner=a,a=process([e.parts[s]],r),delete r.__owner;else if((n=process([i],r))in r.smarty.section&&"text"==i.type&&"smarty"!=process([e.parts[0]],r)&&(n=r.smarty.section[n].index),!n&&void 0!==t&&a instanceof Array&&(n=a.length),void 0!==t&&s==e.parts.length-1&&(a[n]=t),"object"==typeof a&&null!==a&&n in a)a=a[n];else{if(void 0===t)return t;a[n]={},a=a[n]}}return a}function process(e,r){for(var t="",a=0;a<e.length;++a){var n="",s=e[a];if("text"==s.type)n=s.data;else if("var"==s.type)n=getVarValue(s,r);else if("build-in"==s.type)n=buildInFunctions[s.name].process(s,r);else if("plugin"==s.type){var i=plugins[s.name];if("block"==i.type){var o={value:!0};for(i.process(getActualParamValues(s.params,r),"",r,o);o.value;)o.value=!1,n+=i.process(getActualParamValues(s.params,r),process(s.subTree,r),r,o)}else"function"==i.type&&(n=i.process(getActualParamValues(s.params,r),r))}if("boolean"==typeof n&&(n=n?"1":""),null==n&&(n=""),1==e.length)return n;if(t+=null!==n?n:"",r.smarty.continue||r.smarty.break)return t}return t}function getTemplate(e,r,t){if(!t&&e in files)obMerge(r,files[e]);else{var a=jSmart.prototype.getTemplate(e);if("string"!=typeof a)throw new Error("No template for "+e);parse(applyFilters(jSmart.prototype.filters_global.pre,stripComments(a.replace(/\r\n/g,"\n"))),r),files[e]=r}return r}function stripComments(e){for(var r="",t=new RegExp(jSmart.prototype.left_delimiter+"\\*"),a=new RegExp("\\*"+jSmart.prototype.right_delimiter),n=e.match(t);n;n=e.match(t)){r+=e.slice(0,n.index);var s=(e=e.slice(n.index+n[0].length)).match(a);if(!s)throw new Error("Unclosed {*");e=e.slice(s.index+s[0].length)}return r+e}function applyFilters(e,r){for(var t=0;t<e.length;++t)r=e[t](r);return r}var buildInFunctions={expression:{parse:function(e,r){var t=parseExpression(e);return r.push({type:"build-in",name:"expression",expression:t.tree,params:parseParams(e.slice(t.value.length).replace(/^\s+|\s+$/g,""))}),t.tree},process:function(e,r){var t=getActualParamValues(e.params,r),a=process([e.expression],r);if(findInArray(t,"nofilter")<0){for(var n=0;n<default_modifiers.length;++n){var s=default_modifiers[n];s.params.__parsed[0]={type:"text",data:a},a=process([s],r)}escape_html&&(a=modifiers.escape(a)),a=applyFilters(varFilters,a),tpl_modifiers.length&&(__t=function(){return a},a=process(tpl_modifiers,r))}return a}},operator:{process:function(e,r){var t=getActualParamValues(e.params,r),a=t[0];if("binary"!=e.optype){if("!"==e.op)return!a;var n="var"==e.params.__parsed[0].type;n&&(a=getVarValue(e.params.__parsed[0],r));var s=a;if("pre-unary"==e.optype){switch(e.op){case"-":s=-a;break;case"++":s=++a;break;case"--":s=--a}n&&getVarValue(e.params.__parsed[0],r,a)}else{switch(e.op){case"++":a++;break;case"--":a--}getVarValue(e.params.__parsed[0],r,a)}return s}var i=t[1];if("="==e.op)return getVarValue(e.params.__parsed[0],r,i),"";if(e.op.match(/(\+=|-=|\*=|\/=|%=)/)){switch(a=getVarValue(e.params.__parsed[0],r),e.op){case"+=":a+=i;break;case"-=":a-=i;break;case"*=":a*=i;break;case"/=":a/=i;break;case"%=":a%=i}return getVarValue(e.params.__parsed[0],r,a)}if(e.op.match(/div/))return"div"!=e.op^a%i==0;if(e.op.match(/even/))return"even"!=e.op^a/i%2==0;if(e.op.match(/xor/))return(a||i)&&!(a&&i);switch(e.op){case"==":return a==i;case"!=":return a!=i;case"+":return Number(a)+Number(i);case"-":return Number(a)-Number(i);case"*":return Number(a)*Number(i);case"/":return Number(a)/Number(i);case"%":return Number(a)%Number(i);case"&&":return a&&i;case"||":return a||i;case"<":return a<i;case"<=":return a<=i;case">":return a>i;case">=":return a>=i;case"===":return a===i;case"!==":return a!==i}}},section:{type:"block",parse:function(e,r,t){var a=[],n=[];r.push({type:"build-in",name:"section",params:e,subTree:a,subTreeElse:n});var s=findElseTag("section [^}]+","/section","sectionelse",t);s?(parse(t.slice(0,s.index),a),parse(t.slice(s.index+s[0].length).replace(/^[\r\n]/,""),n)):parse(t,a)},process:function(e,r){var t=getActualParamValues(e.params,r),a={};r.smarty.section[t.__get("name",null,0)]=a;var n=t.__get("show",!0);if(a.show=n,!n)return process(e.subTreeElse,r);var s=parseInt(t.__get("start",0)),i=t.loop instanceof Object?countProperties(t.loop):isNaN(t.loop)?0:parseInt(t.loop),o=parseInt(t.__get("step",1)),p=parseInt(t.__get("max"));isNaN(p)&&(p=Number.MAX_VALUE),s<0?(s+=i)<0&&(s=0):s>=i&&(s=i?i-1:0);for(var l=0,c=s;c>=0&&c<i&&l<p;c+=o,++l)c;a.total=l,a.loop=l,l=0;var u="";for(c=s;c>=0&&c<i&&l<p&&!r.smarty.break;c+=o,++l)a.first=c==s,a.last=c+o<0||c+o>=i,a.index=c,a.index_prev=c-o,a.index_next=c+o,a.iteration=a.rownum=l+1,u+=process(e.subTree,r),r.smarty.continue=!1;return r.smarty.break=!1,l?u:process(e.subTreeElse,r)}},setfilter:{type:"block",parseParams:function(e){return[parseExpression("__t()|"+e).tree]},parse:function(e,r,t){r.push({type:"build-in",name:"setfilter",params:e,subTree:parse(t,[])})},process:function(e,r){tpl_modifiers=e.params;var t=process(e.subTree,r);return tpl_modifiers=[],t}},for:{type:"block",parseParams:function(e){var r=e.match(/^\s*\$(\w+)\s*=\s*([^\s]+)\s*to\s*([^\s]+)\s*(?:step\s*([^\s]+))?\s*(.*)$/);if(!r)throw new Error("Invalid {for} parameters: "+e);return parseParams("varName='"+r[1]+"' from="+r[2]+" to="+r[3]+" step="+(r[4]?r[4]:"1")+" "+r[5])},parse:function(e,r,t){var a=[],n=[];r.push({type:"build-in",name:"for",params:e,subTree:a,subTreeElse:n});var s=findElseTag("for\\s[^}]+","/for","forelse",t);s?(parse(t.slice(0,s.index),a),parse(t.slice(s.index+s[0].length),n)):parse(t,a)},process:function(e,r){var t=getActualParamValues(e.params,r),a=parseInt(t.__get("from")),n=parseInt(t.__get("to")),s=parseInt(t.__get("step"));isNaN(s)&&(s=1);var i=parseInt(t.__get("max"));isNaN(i)&&(i=Number.MAX_VALUE);for(var o=0,p="",l=Math.min(Math.ceil((1+(s>0?n-a:a-n))/Math.abs(s)),i),c=parseInt(t.from);o<l&&!r.smarty.break;c+=s,++o)r[t.varName]=c,p+=process(e.subTree,r),r.smarty.continue=!1;return r.smarty.break=!1,o||(p=process(e.subTreeElse,r)),p}},if:{type:"block",parse:function(e,r,t){var a=[],n=[];r.push({type:"build-in",name:"if",params:e,subTreeIf:a,subTreeElse:n});var s=findElseTag("if\\s+[^}]+","/if","else[^}]*",t);if(s){parse(t.slice(0,s.index),a),t=t.slice(s.index+s[0].length);var i=s[1].match(/^else\s*if(.*)/);i?buildInFunctions.if.parse(parseParams(i[1]),n,t.replace(/^\n/,"")):parse(t.replace(/^\n/,""),n)}else parse(t,a)},process:function(e,r){var t=getActualParamValues(e.params,r)[0];return t&&!(t instanceof Array&&0==t.length||"object"==typeof t&&isEmptyObject(t))?process(e.subTreeIf,r):process(e.subTreeElse,r)}},foreach:{type:"block",parseParams:function(e){var r=e.match(/^\s*([$].+)\s*as\s*[$](\w+)\s*(=>\s*[$](\w+))?\s*$/i);return r&&(e="from="+r[1]+" item="+(r[4]||r[2]),r[4]&&(e+=" key="+r[2])),parseParams(e)},parse:function(e,r,t){var a=[],n=[];r.push({type:"build-in",name:"foreach",params:e,subTree:a,subTreeElse:n});var s=findElseTag("foreach\\s[^}]+","/foreach","foreachelse",t);s?(parse(t.slice(0,s.index),a),parse(t.slice(s.index+s[0].length).replace(/^[\r\n]/,""),n)):parse(t,a)},process:function(e,r){var t=getActualParamValues(e.params,r),a=t.from;void 0===a&&(a=[]),"object"!=typeof a&&(a=[a]);var n=countProperties(a);r[t.item+"__total"]=n,"name"in t&&(r.smarty.foreach[t.name]={},r.smarty.foreach[t.name].total=n);var s="",i=0;for(var o in a)if(a.hasOwnProperty(o)){if(r.smarty.break)break;r[t.item+"__key"]=isNaN(o)?o:parseInt(o),"key"in t&&(r[t.key]=r[t.item+"__key"]),r[t.item]=a[o],r[t.item+"__index"]=parseInt(i),r[t.item+"__iteration"]=parseInt(i+1),r[t.item+"__first"]=0===i,r[t.item+"__last"]=i==n-1,"name"in t&&(r.smarty.foreach[t.name].index=parseInt(i),r.smarty.foreach[t.name].iteration=parseInt(i+1),r.smarty.foreach[t.name].first=0===i?1:"",r.smarty.foreach[t.name].last=i==n-1?1:""),++i,s+=process(e.subTree,r),r.smarty.continue=!1}return r.smarty.break=!1,r[t.item+"__show"]=i>0,t.name&&(r.smarty.foreach[t.name].show=i>0?1:""),i>0?s:process(e.subTreeElse,r)}},function:{type:"block",parse:function(e,r,t){var a=[];plugins[trimQuotes(e.name?e.name:e[0])]={type:"function",subTree:a,defautParams:e,process:function(e,r){var t=getActualParamValues(this.defautParams,r);return delete t.name,process(this.subTree,obMerge({},r,t,e))}},parse(t,a)}},php:{type:"block",parse:function(e,r,t){}},extends:{type:"function",parse:function(e,r){r.splice(0,r.length),getTemplate(trimQuotes(e.file?e.file:e[0]),r)}},block:{type:"block",parse:function(e,r,t){r.push({type:"build-in",name:"block",params:e}),e.append=findInArray(e,"append")>=0,e.prepend=findInArray(e,"prepend")>=0,e.hide=findInArray(e,"hide")>=0,e.hasChild=e.hasParent=!1,onParseVar=function(r){r.match(/^\s*[$]smarty.block.child\s*$/)&&(e.hasChild=!0),r.match(/^\s*[$]smarty.block.parent\s*$/)&&(e.hasParent=!0)};var r=parse(t,[]);onParseVar=function(e){};var a=trimQuotes(e.name?e.name:e[0]);a in blocks||(blocks[a]=[]),blocks[a].push({tree:r,params:e})},process:function(e,r){r.smarty.block.parent=r.smarty.block.child="";var t=trimQuotes(e.params.name?e.params.name:e.params[0]);return this.processBlocks(blocks[t],blocks[t].length-1,r),r.smarty.block.child},processBlocks:function(e,r,t){if(r||!e[r].params.hide)for(var a=!0,n=!1;r>=0;--r){if(e[r].params.hasParent){s=t.smarty.block.child;t.smarty.block.child="",this.processBlocks(e,r-1,t),t.smarty.block.parent=t.smarty.block.child,t.smarty.block.child=s}var s=t.smarty.block.child,i=process(e[r].tree,t);t.smarty.block.child=s,e[r].params.hasChild?t.smarty.block.child=i:a?t.smarty.block.child=i+t.smarty.block.child:n&&(t.smarty.block.child+=i),a=e[r].params.append,n=e[r].params.prepend}else t.smarty.block.child=""}},strip:{type:"block",parse:function(e,r,t){parse(t.replace(/[ \t]*[\r\n]+[ \t]*/g,""),r)}},literal:{type:"block",parse:function(e,r,t){parseText(t,r)}},ldelim:{type:"function",parse:function(e,r){parseText(jSmart.prototype.left_delimiter,r)}},rdelim:{type:"function",parse:function(e,r){parseText(jSmart.prototype.right_delimiter,r)}},while:{type:"block",parse:function(e,r,t){r.push({type:"build-in",name:"while",params:e,subTree:parse(t,[])})},process:function(e,r){for(var t="";getActualParamValues(e.params,r)[0]&&!r.smarty.break;)t+=process(e.subTree,r),r.smarty.continue=!1;return r.smarty.break=!1,t}}},plugins={},modifiers={},files={},blocks=null,scripts=null,tpl_modifiers=[],tokens=[{re:/^\$([\w@]+)/,parse:function(e,r){parseModifiers(parseVar(r,e,RegExp.$1),e)}},{re:/^(true|false)/i,parse:function(e,r){parseText(e.token.match(/true/i)?"1":"",e.tree)}},{re:/^'([^'\\]*(?:\\.[^'\\]*)*)'/,parse:function(e,r){parseText(evalString(RegExp.$1),e.tree),parseModifiers(r,e)}},{re:/^"([^"\\]*(?:\\.[^"\\]*)*)"/,parse:function(e,r){var t=evalString(RegExp.$1),a=t.match(tokens[0].re);if(a){var n={token:a[0],tree:[]};if(parseVar(t,n,a[1]),n.token.length==t.length)return void e.tree.push(n.tree[0])}parseText.parseEmbeddedVars=!0,e.tree.push({type:"plugin",name:"__quoted",params:{__parsed:parse(t,[])}}),parseText.parseEmbeddedVars=!1,parseModifiers(r,e)}},{re:/^(\w+)\s*[(]([)]?)/,parse:function(e,r){var t=RegExp.$1,a=parseParams(RegExp.$2?"":r,/^\s*,\s*/);parseFunc(t,a,e.tree),e.value+=a.toString(),parseModifiers(r.slice(a.toString().length),e)}},{re:/^\s*\(\s*/,parse:function(e,r){var t=[];e.tree.push(t),t.parent=e.tree,e.tree=t}},{re:/^\s*\)\s*/,parse:function(e,r){e.tree.parent&&(e.tree=e.tree.parent)}},{re:/^\s*(\+\+|--)\s*/,parse:function(e,r){e.tree.length&&"var"==e.tree[e.tree.length-1].type?parseOperator(RegExp.$1,"post-unary",1,e.tree):parseOperator(RegExp.$1,"pre-unary",1,e.tree)}},{re:/^\s*(===|!==|==|!=)\s*/,parse:function(e,r){parseOperator(RegExp.$1,"binary",6,e.tree)}},{re:/^\s+(eq|ne|neq)\s+/i,parse:function(e,r){parseOperator(RegExp.$1.replace(/ne(q)?/,"!=").replace(/eq/,"=="),"binary",6,e.tree)}},{re:/^\s*!\s*/,parse:function(e,r){parseOperator("!","pre-unary",2,e.tree)}},{re:/^\s+not\s+/i,parse:function(e,r){parseOperator("!","pre-unary",2,e.tree)}},{re:/^\s*(=|\+=|-=|\*=|\/=|%=)\s*/,parse:function(e,r){parseOperator(RegExp.$1,"binary",10,e.tree)}},{re:/^\s*(\*|\/|%)\s*/,parse:function(e,r){parseOperator(RegExp.$1,"binary",3,e.tree)}},{re:/^\s+mod\s+/i,parse:function(e,r){parseOperator("%","binary",3,e.tree)}},{re:/^\s*(\+|-)\s*/,parse:function(e,r){e.tree.length&&"operator"!=e.tree[e.tree.length-1].name?parseOperator(RegExp.$1,"binary",4,e.tree):parseOperator(RegExp.$1,"pre-unary",4,e.tree)}},{re:/^\s*(<=|>=|<>|<|>)\s*/,parse:function(e,r){parseOperator(RegExp.$1.replace(/<>/,"!="),"binary",5,e.tree)}},{re:/^\s+(lt|lte|le|gt|gte|ge)\s+/i,parse:function(e,r){parseOperator(RegExp.$1.replace(/l(t)?e/,"<").replace(/lt/,"<=").replace(/g(t)?e/,">").replace(/gt/,">="),"binary",5,e.tree)}},{re:/^\s+(is\s+(not\s+)?div\s+by)\s+/i,parse:function(e,r){parseOperator(RegExp.$2?"div_not":"div","binary",7,e.tree)}},{re:/^\s+is\s+(not\s+)?(even|odd)(\s+by\s+)?\s*/i,parse:function(e,r){parseOperator(RegExp.$1?"odd"==RegExp.$2?"even":"even_not":"odd"==RegExp.$2?"even_not":"even","binary",7,e.tree),RegExp.$3||parseText("1",e.tree)}},{re:/^\s*(&&)\s*/,parse:function(e,r){parseOperator(RegExp.$1,"binary",8,e.tree)}},{re:/^\s*(\|\|)\s*/,parse:function(e,r){parseOperator(RegExp.$1,"binary",9,e.tree)}},{re:/^\s+and\s+/i,parse:function(e,r){parseOperator("&&","binary",11,e.tree)}},{re:/^\s+xor\s+/i,parse:function(e,r){parseOperator("xor","binary",12,e.tree)}},{re:/^\s+or\s+/i,parse:function(e,r){parseOperator("||","binary",13,e.tree)}},{re:/^#(\w+)#/,parse:function(e,r){var t={token:"$smarty",tree:[]};parseVar(".config."+RegExp.$1,t,"smarty"),e.tree.push(t.tree[0]),parseModifiers(r,e)}},{re:/^\s*\[\s*/,parse:function(e,r){var t=parseParams(r,/^\s*,\s*/,/^('[^'\\]*(?:\\.[^'\\]*)*'|"[^"\\]*(?:\\.[^"\\]*)*"|\w+)\s*=>\s*/);parsePluginFunc("__array",t,e.tree),e.value+=t.toString();var a=r.slice(t.toString().length).match(/\s*\]/);a&&(e.value+=a[0])}},{re:/^[\d.]+/,parse:function(e,r){e.token.indexOf(".")>-1?e.token=parseFloat(e.token):e.token=parseInt(e.token,10),parseText(e.token,e.tree),parseModifiers(r,e)}},{re:/^\w+/,parse:function(e,r){parseText(e.token,e.tree),parseModifiers(r,e)}}];jSmart=function(e){this.tree=[],this.tree.blocks={},this.scripts={},this.default_modifiers=[],this.filters={variable:[],post:[]},this.smarty={smarty:{block:{},break:!1,capture:{},continue:!1,counter:{},cycle:{},foreach:{},section:{},now:Math.floor((new Date).getTime()/1e3),const:{},config:{},current_dir:"/",template:"",ldelim:jSmart.prototype.left_delimiter,rdelim:jSmart.prototype.right_delimiter,version:"2.15.1"}},blocks=this.tree.blocks,parse(applyFilters(jSmart.prototype.filters_global.pre,stripComments(new String(e||"").replace(/\r\n/g,"\n"))),this.tree)},jSmart.prototype.fetch=function(e){blocks=this.tree.blocks,scripts=this.scripts,escape_html=this.escape_html,default_modifiers=jSmart.prototype.default_modifiers_global.concat(this.default_modifiers),this.data=obMerge("object"==typeof e?e:{},this.smarty),varFilters=jSmart.prototype.filters_global.variable.concat(this.filters.variable);var r=process(this.tree,this.data);return jSmart.prototype.debugging&&plugins.debug.process([],this.data),applyFilters(jSmart.prototype.filters_global.post.concat(this.filters.post),r)},jSmart.prototype.escape_html=!1,jSmart.prototype.registerPlugin=function(e,r,t){"modifier"==e?modifiers[r]=t:plugins[r]={type:e,process:t}},jSmart.prototype.registerFilter=function(e,r){(this.tree?this.filters:jSmart.prototype.filters_global)["output"==e?"post":e].push(r)},jSmart.prototype.filters_global={pre:[],variable:[],post:[]},jSmart.prototype.configLoad=function(e,r,t){t=t||this.data;for(var a=e.replace(/\r\n/g,"\n").replace(/^\s+|\s+$/g,""),n=/^\s*(?:\[([^\]]+)\]|(?:(\w+)[ \t]*=[ \t]*("""|'[^'\\\n]*(?:\\.[^'\\\n]*)*'|"[^"\\\n]*(?:\\.[^"\\\n]*)*"|[^\n]*)))/m,s="",i=a.match(n);i;i=a.match(n)){if(a=a.slice(i.index+i[0].length),i[1])s=i[1];else if((!s||s==r)&&"."!=s.substr(0,1))if('"""'==i[3]){var o=a.match(/"""/);o&&(t.smarty.config[i[2]]=a.slice(0,o.index),a=a.slice(o.index+o[0].length))}else t.smarty.config[i[2]]=trimQuotes(i[3]);var p=a.match(/\n+/);if(!p)break;a=a.slice(p.index+p[0].length)}},jSmart.prototype.clearConfig=function(e){e?delete this.data.smarty.config[e]:this.data.smarty.config={}},jSmart.prototype.addDefaultModifier=function(e){e instanceof Array||(e=[e]);for(var r=0;r<e.length;++r){var t={value:"",tree:[0]};parseModifiers("|"+e[r],t),(this.tree?this.default_modifiers:this.default_modifiers_global).push(t.tree[0])}},jSmart.prototype.default_modifiers_global=[],jSmart.prototype.getTemplate=function(e){throw new Error("No template for "+e)},jSmart.prototype.getFile=function(e){throw new Error("No file for "+e)},jSmart.prototype.getJavascript=function(e){throw new Error("No Javascript for "+e)},jSmart.prototype.getConfig=function(e){throw new Error("No config for "+e)},jSmart.prototype.auto_literal=!0,jSmart.prototype.left_delimiter="{",jSmart.prototype.right_delimiter="}",jSmart.prototype.debugging=!1,jSmart.prototype.PHPJS=function(fnm,modifier){if("function"==eval("typeof "+fnm))return"object"==typeof window?window:global;if("function"==typeof PHP_JS)return new PHP_JS;throw new Error("Modifier '"+modifier+"' uses JavaScript port of PHP function '"+fnm+"'. You can find one at http://phpjs.org")},jSmart.prototype.makeTimeStamp=function(e){if(!e)return Math.floor((new Date).getTime()/1e3);if(isNaN(e)){var r=jSmart.prototype.PHPJS("strtotime","date_format").strtotime(e);return-1==r||!1===r?Math.floor((new Date).getTime()/1e3):r}return 14==(e=new String(e)).length?Math.floor(new Date(e.substr(0,4),e.substr(4,2)-1,e.substr(6,2),e.substr(8,2),e.substr(10,2)).getTime()/1e3):parseInt(e)},jSmart.prototype.registerPlugin("function","__array",function(e,r){var t=[];for(var a in e)e.hasOwnProperty(a)&&e[a]&&"function"!=typeof e[a]&&(t[a]=e[a]);return t}),jSmart.prototype.registerPlugin("function","__func",function(e,r){for(var t=[],a={},n=[],s=0;s<e.length;++s)t.push(e.name+"__p"+s),n.push(e[s]),a[e.name+"__p"+s]=e[s];var i,o=obMerge({},r,a);return"__owner"in r&&e.name in r.__owner?(i="__owner."+e.name,execute(i+"("+t.join(",")+")",o)):modifiers.hasOwnProperty(e.name)?(i=modifiers[e.name],executeByFuncObject(i,n)):(i=e.name,execute(i+"("+t.join(",")+")",o))}),jSmart.prototype.registerPlugin("function","__quoted",function(e,r){return e.join("")}),jSmart.prototype.registerPlugin("function","append",function(e,r){var t=e.__get("var",null,0);t in r&&r[t]instanceof Array||(r[t]=[]);var a=e.__get("index",!1),n=e.__get("value",null,1);return!1===a?r[t].push(n):r[t][a]=n,""}),jSmart.prototype.registerPlugin("function","assign",function(e,r){return assignVar(e.__get("var",null,0),e.__get("value",null,1),r),""}),jSmart.prototype.registerPlugin("function","break",function(e,r){return r.smarty.break=!0,""}),jSmart.prototype.registerPlugin("function","call",function(e,r){var t=e.__get("name",null,0);delete e.name;var a=e.__get("assign",!1);delete e.assign;var n=plugins[t].process(e,r);return a?(assignVar(a,n,r),""):n}),jSmart.prototype.registerPlugin("block","capture",function(e,r,t,a){if(r){r=r.replace(/^\n/,""),t.smarty.capture[e.__get("name","default",0)]=r,"assign"in e&&assignVar(e.assign,r,t);var n=e.__get("append",!1);n&&(n in t?t[n]instanceof Array&&t[n].push(r):t[n]=[r])}return""}),jSmart.prototype.registerPlugin("function","continue",function(e,r){return r.smarty.continue=!0,""}),jSmart.prototype.registerPlugin("function","counter",function(e,r){var t=e.__get("name","default");if(t in r.smarty.counter){var a=r.smarty.counter[t];"start"in e?a.value=parseInt(e.start):(a.value=parseInt(a.value),a.skip=parseInt(a.skip),"down"==a.direction?a.value-=a.skip:a.value+=a.skip),a.skip=e.__get("skip",a.skip),a.direction=e.__get("direction",a.direction),a.assign=e.__get("assign",a.assign)}else r.smarty.counter[t]={value:parseInt(e.__get("start",1)),skip:parseInt(e.__get("skip",1)),direction:e.__get("direction","up"),assign:e.__get("assign",!1)};return r.smarty.counter[t].assign?(r[r.smarty.counter[t].assign]=r.smarty.counter[t].value,""):e.__get("print",!0)?r.smarty.counter[t].value:""}),jSmart.prototype.registerPlugin("function","cycle",function(e,r){var t=e.__get("name","default"),a=e.__get("reset",!1);t in r.smarty.cycle||(r.smarty.cycle[t]={arr:[""],delimiter:e.__get("delimiter",","),index:0},a=!0),e.__get("delimiter",!1)&&(r.smarty.cycle[t].delimiter=e.delimiter);var n=e.__get("values",!1);if(n){var s=[];if(n instanceof Object)for(nm in n)s.push(n[nm]);else s=n.split(r.smarty.cycle[t].delimiter);s.length==r.smarty.cycle[t].arr.length&&s[0]==r.smarty.cycle[t].arr[0]||(r.smarty.cycle[t].arr=s,r.smarty.cycle[t].index=0,a=!0)}return e.__get("advance","true")&&(r.smarty.cycle[t].index+=1),(r.smarty.cycle[t].index>=r.smarty.cycle[t].arr.length||a)&&(r.smarty.cycle[t].index=0),e.__get("assign",!1)?(assignVar(e.assign,r.smarty.cycle[t].arr[r.smarty.cycle[t].index],r),""):e.__get("print",!0)?r.smarty.cycle[t].arr[r.smarty.cycle[t].index]:""}),jSmart.prototype.print_r=function(e,r){if(e instanceof Object){var t=(e instanceof Array?"Array["+e.length+"]":"Object")+"<br>";for(var a in e)e.hasOwnProperty(a)&&(t+=r+"&nbsp;&nbsp;<strong>"+a+"</strong> : "+jSmart.prototype.print_r(e[a],r+"&nbsp;&nbsp;&nbsp;")+"<br>");return t}return e},jSmart.prototype.registerPlugin("function","debug",function(e,r){"undefined"!=typeof dbgWnd&&dbgWnd.close(),dbgWnd=window.open("","","width=680,height=600,resizable,scrollbars=yes");var t="",a=0;for(var n in r)t+="<tr class="+(++a%2?"odd":"even")+"><td><strong>"+n+"</strong></td><td>"+jSmart.prototype.print_r(r[n],"")+"</td></tr>";return dbgWnd.document.write("                <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en'>                <head> \t\t            <title>jSmart Debug Console</title>                   <style type='text/css'>                      table {width: 100%;}                      td {vertical-align:top;width: 50%;}                      .even td {background-color: #fafafa;}                   </style>                </head>                <body>                   <h1>jSmart Debug Console</h1>                   <h2>assigned template variables</h2>                   <table>"+t+"</table>                </body>                </html>             "),""}),jSmart.prototype.registerPlugin("function","eval",function(e,r){var t=[];parse(e.__get("var","",0),t);var a=process(t,r);return"assign"in e?(assignVar(e.assign,a,r),""):a}),jSmart.prototype.registerPlugin("function","fetch",function(e,r){var t=jSmart.prototype.getFile(e.__get("file",null,0));return"assign"in e?(assignVar(e.assign,t,r),""):t}),jSmart.prototype.registerPlugin("function","html_checkboxes",function(e,r){var t,a,n,s=e.__get("type","checkbox"),i=e.__get("name",s),o=e.__get("name",s),p=e.__get("values",e.options),l=e.__get("options",[]),c="options"in e,u=e.__get("selected",!1),f=e.__get("separator",""),m=Boolean(e.__get("labels",!0)),g=Boolean(e.__get("label_ids",!1)),d=[],h=0,y="";if("checkbox"==s&&(i+="[]"),!c)for(t in e.output)l.push(e.output[t]);for(t in p)p.hasOwnProperty(t)&&(n=o+"_"+(a=c?t:p[t]),y=m?g?'<label for="'+n+'">':"<label>":"",y+='<input type="'+s+'" name="'+i+'" value="'+a+'" ',g&&(y+='id="'+n+'" '),u==(c?t:p[t])&&(y+='checked="checked" '),y+="/>"+l[c?t:h++],y+=m?"</label>":"",y+=f,d.push(y));return"assign"in e?(assignVar(e.assign,d,r),""):d.join("\n")}),jSmart.prototype.registerPlugin("function","html_image",function(e,r){var t,a=e.__get("file",null),n=e.__get("width",!1),s=e.__get("height",!1),i=e.__get("alt",""),o=e.__get("href",e.__get("link",!1)),p={file:1,width:1,height:1,alt:1,href:1,basedir:1,path_prefix:1,link:1},l='<img src="'+e.__get("path_prefix","")+a+'" alt="'+i+'"'+(n?' width="'+n+'"':"")+(s?' height="'+s+'"':"");for(t in e)e.hasOwnProperty(t)&&"string"==typeof e[t]&&(t in p||(l+=" "+t+'="'+e[t]+'"'));return l+=" />",o?'<a href="'+o+'">'+l+"</a>":l}),jSmart.prototype.registerPlugin("function","html_options",function(e,r){var t,a=e.__get("values",e.options),n=e.__get("options",[]),s="options"in e;if(!s)for(t in e.output)n.push(e.output[t]);var i=e.__get("selected",!1),o=[],p="",l=0;for(t in a)a.hasOwnProperty(t)&&(p='<option value="'+(s?t:a[t])+'"',i==(s?t:a[t])&&(p+=' selected="selected"'),p+=">"+n[s?t:l++]+"</option>",o.push(p));var c=e.__get("name",!1);return(c?'<select name="'+c+'">\n'+o.join("\n")+"\n</select>":o.join("\n"))+"\n"}),jSmart.prototype.registerPlugin("function","html_radios",function(e,r){return e.type="radio",plugins.html_checkboxes.process(e,r)}),jSmart.prototype.registerPlugin("function","html_select_date",function(e,r){var t=e.__get("prefix","Date_"),a=["January","February","March","April","May","June","July","August","September","October","November","December"],n="";n+='<select name="'+t+'Month">\n';var s=0;for(s=0;s<a.length;++s)n+='<option value="'+s+'">'+a[s]+"</option>\n";for(n+="</select>\n",n+='<select name="'+t+'Day">\n',s=0;s<31;++s)n+='<option value="'+s+'">'+s+"</option>\n";return n+="</select>\n"}),jSmart.prototype.registerPlugin("function","html_table",function(e,r){var t,a=[];if(e.loop instanceof Array)a=e.loop;else for(t in e.loop)e.loop.hasOwnProperty(t)&&a.push(e.loop[t]);var n=e.__get("rows",!1),s=e.__get("cols",!1);s||(s=n?Math.ceil(a.length/n):3);var i=[];if(isNaN(s)){if("object"==typeof s)for(t in s)s.hasOwnProperty(t)&&i.push(s[t]);else i=s.split(/\s*,\s*/);s=i.length}n=n||Math.ceil(a.length/s);var o=e.__get("inner","cols"),p=e.__get("caption",""),l=e.__get("table_attr",'border="1"'),c=e.__get("th_attr",!1);c&&"object"!=typeof c&&(c=[c]);var u=e.__get("tr_attr",!1);u&&"object"!=typeof u&&(u=[u]);var f=e.__get("td_attr",!1);f&&"object"!=typeof f&&(f=[f]);for(var m=e.__get("trailpad","&nbsp;"),g=e.__get("hdir","right"),d=e.__get("vdir","down"),h="",y=0;y<n;++y){h+="<tr"+(u?" "+u[y%u.length]:"")+">\n";for(var _=0;_<s;++_){var v="cols"==o?("down"==d?y:n-1-y)*s+("right"==g?_:s-1-_):("right"==g?_:s-1-_)*n+("down"==d?y:n-1-y);h+="<td"+(f?" "+f[_%f.length]:"")+">"+(v<a.length?a[v]:m)+"</td>\n"}h+="</tr>\n"}var b="";if(i.length){b="\n<thead><tr>";for(var S=0;S<i.length;++S)b+="\n<th"+(c?" "+c[S%c.length]:"")+">"+i["right"==g?S:i.length-1-S]+"</th>";b+="\n</tr></thead>"}return"<table "+l+">"+(p?"\n<caption>"+p+"</caption>":"")+b+"\n<tbody>\n"+h+"</tbody>\n</table>\n"}),jSmart.prototype.registerPlugin("function","include",function(e,r){var t=e.__get("file",null,0),a=obMerge({},r,e);a.smarty.template=t;var n=process(getTemplate(t,[],findInArray(e,"nocache")>=0),a);return"assign"in e?(assignVar(e.assign,n,r),""):n}),jSmart.prototype.registerPlugin("function","include_javascript",function(e,r){var t=e.__get("file",null,0);if(e.__get("once",!0)&&t in scripts)return"";scripts[t]=!0;var a=execute(jSmart.prototype.getJavascript(t),{$this:r});return"assign"in e?(assignVar(e.assign,a,r),""):a}),jSmart.prototype.registerPlugin("function","include_php",function(e,r){return plugins.include_javascript.process(e,r)}),jSmart.prototype.registerPlugin("function","insert",function(params,data){var fparams={};for(var nm in params)params.hasOwnProperty(nm)&&isNaN(nm)&&params[nm]&&"string"==typeof params[nm]&&"name"!=nm&&"assign"!=nm&&"script"!=nm&&(fparams[nm]=params[nm]);var prefix="insert_";"script"in params&&(eval(jSmart.prototype.getJavascript(params.script)),prefix="smarty_insert_");var func=eval(prefix+params.__get("name",null,0)),s=func(fparams,data);return"assign"in params?(assignVar(params.assign,s,data),""):s}),jSmart.prototype.registerPlugin("block","javascript",function(e,r,t,a){return t.$this=t,execute(r,t),delete t.$this,""}),jSmart.prototype.registerPlugin("function","config_load",function(e,r){return jSmart.prototype.configLoad(jSmart.prototype.getConfig(e.__get("file",null,0)),e.__get("section","",1),r),""}),jSmart.prototype.registerPlugin("function","mailto",function(e,r){var t=e.__get("address",null),a=e.__get("encode","none"),n=e.__get("text",t),i=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("cc","")).replace("%40","@"),o=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("bcc","")).replace("%40","@"),p=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("followupto","")).replace("%40","@"),l=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("subject","")),c=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("newsgroups","")),u=e.__get("extra","");if(t+=i?"?cc="+i:"",t+=o?(i?"&":"?")+"bcc="+o:"",t+=l?(i||o?"&":"?")+"subject="+l:"",t+=c?(i||o||l?"&":"?")+"newsgroups="+c:"",t+=p?(i||o||l||c?"&":"?")+"followupto="+p:"",s='<a href="mailto:'+t+'" '+u+">"+n+"</a>","javascript"==a){s="document.write('"+s+"');";for(var f="",m=0;m<s.length;++m)f+="%"+jSmart.prototype.PHPJS("bin2hex","mailto").bin2hex(s.substr(m,1));return'<script type="text/javascript">eval(unescape(\''+f+"'))<\/script>"}if("javascript_charcode"==a){for(var g=[],m=0;m<s.length;++m)g.push(jSmart.prototype.PHPJS("ord","mailto").ord(s.substr(m,1)));return'<script type="text/javascript" language="javascript">\n\x3c!--\n{document.write(String.fromCharCode('+g.join(",")+"))}\n//--\x3e\n<\/script>\n"}if("hex"==a){if(t.match(/^.+\?.+$/))throw new Error("mailto: hex encoding does not work with extra attributes. Try javascript.");for(var d="",m=0;m<t.length;++m)t.substr(m,1).match(/\w/)?d+="%"+jSmart.prototype.PHPJS("bin2hex","mailto").bin2hex(t.substr(m,1)):d+=t.substr(m,1);d=d.toLowerCase();for(var h="",m=0;m<n.length;++m)h+="&#x"+jSmart.prototype.PHPJS("bin2hex","mailto").bin2hex(n.substr(m,1))+";";return h=h.toLowerCase(),'<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;'+d+'" '+u+">"+h+"</a>"}return s}),jSmart.prototype.registerPlugin("function","math",function(params,data){with(Math)with(params)var res=eval(params.__get("equation",null).replace(/pi\(\s*\)/g,"PI"));return"format"in params&&(res=jSmart.prototype.PHPJS("sprintf","math").sprintf(params.format,res)),"assign"in params?(assignVar(params.assign,res,data),""):res}),jSmart.prototype.registerPlugin("block","nocache",function(e,r,t,a){return r}),jSmart.prototype.registerPlugin("block","textformat",function(e,r,t,a){if(!r)return"";r=new String(r);var n=e.__get("wrap",80),s=e.__get("wrap_char","\n"),i=e.__get("wrap_cut",!1),o=e.__get("indent_char"," "),p=e.__get("indent",0),l=new Array(p+1).join(o),c=e.__get("indent_first",0),u=new Array(c+1).join(o);"email"==e.__get("style","")&&(n=72);for(var f=r.split(/[\r\n]{2}/),m=0;m<f.length;++m){var g=f[m];g&&(g=g.replace(/^\s+|\s+$/,"").replace(/\s+/g," "),c>0&&(g=u+g),g=modifiers.wordwrap(g,n-p,s,i),p>0&&(g=g.replace(/^/gm,l)),f[m]=g)}var d=f.join(s+s);return"assign"in e?(assignVar(e.assign,d,t),""):d}),jSmart.prototype.registerPlugin("modifier","capitalize",function(e,r,t){if("string"!=typeof e)return e;var a=new RegExp(r?"[^a-zA-Z_à-ü]+":"[^a-zA-Z0-9_à-ü]"),n=null,s="";for(t&&(e=e.toLowerCase()),n=e.match(a);n;n=e.match(a)){var i=e.slice(0,n.index);i.match(/\d/)?s+=i:s+=i.charAt(0).toUpperCase()+i.slice(1),s+=e.slice(n.index,n.index+n[0].length),e=e.slice(n.index+n[0].length)}return e.match(/\d/)?s+e:s+e.charAt(0).toUpperCase()+e.slice(1)}),jSmart.prototype.registerPlugin("modifier","cat",function(e,r){return r=r||"",new String(e)+r}),jSmart.prototype.registerPlugin("modifier","count",function(e,r){if(null===e||void 0===e)return 0;if(e.constructor!==Array&&e.constructor!==Object)return 1;r=Boolean(r);var t,a=0;for(t in e)e.hasOwnProperty(t)&&(a++,r&&e[t]&&(e[t].constructor===Array||e[t].constructor===Object)&&(a+=modifiers.count(e[t],!0)));return a}),jSmart.prototype.registerPlugin("modifier","count_characters",function(e,r){return e=new String(e),r?e.length:e.replace(/\s/g,"").length}),jSmart.prototype.registerPlugin("modifier","count_paragraphs",function(e){var r=new String(e).match(/\n+/g);return r?r.length+1:1}),jSmart.prototype.registerPlugin("modifier","count_sentences",function(e){if("string"==typeof e){var r=e.match(/[^\s]\.(?!\w)/g);if(r)return r.length}return 0}),jSmart.prototype.registerPlugin("modifier","count_words",function(e){if("string"==typeof e){var r=e.match(/\w+/g);if(r)return r.length}return 0}),jSmart.prototype.registerPlugin("modifier","date_format",function(e,r,t){return jSmart.prototype.PHPJS("strftime","date_format").strftime(r||"%b %e, %Y",jSmart.prototype.makeTimeStamp(e||t))}),jSmart.prototype.registerPlugin("modifier","defaultValue",function(e,r){return e&&"null"!=e&&"undefined"!=e?e:r||""}),jSmart.prototype.registerPlugin("modifier","unescape",function(e,r,t){switch(e=new String(e),r=r||"html",t=t||"UTF-8",r){case"html":return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#039;/g,"'").replace(/&quot;/g,'"');case"entity":case"htmlall":return jSmart.prototype.PHPJS("html_entity_decode","unescape").html_entity_decode(e,1);case"url":return jSmart.prototype.PHPJS("rawurldecode","unescape").rawurldecode(e)}return e}),jSmart.prototype.registerPlugin("modifier","escape",function(e,r,t,a){switch(e=new String(e),r=r||"html",t=t||"UTF-8",a=void 0===a||Boolean(a),r){case"html":return a&&(e=e.replace(/&/g,"&amp;")),e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;");case"htmlall":return jSmart.prototype.PHPJS("htmlentities","escape").htmlentities(e,3,t);case"url":return jSmart.prototype.PHPJS("rawurlencode","escape").rawurlencode(e);case"urlpathinfo":return jSmart.prototype.PHPJS("rawurlencode","escape").rawurlencode(e).replace(/%2F/g,"/");case"quotes":return e.replace(/(^|[^\\])'/g,"$1\\'");case"hex":for(var n="",s=0;s<e.length;++s)n+="%"+jSmart.prototype.PHPJS("bin2hex","escape").bin2hex(e.substr(s,1)).toLowerCase();return n;case"hexentity":for(var n="",s=0;s<e.length;++s)n+="&#x"+jSmart.prototype.PHPJS("bin2hex","escape").bin2hex(e.substr(s,1))+";";return n;case"decentity":for(var n="",s=0;s<e.length;++s)n+="&#"+jSmart.prototype.PHPJS("ord","escape").ord(e.substr(s,1))+";";return n;case"mail":return e.replace(/@/g," [AT] ").replace(/[.]/g," [DOT] ");case"nonstd":for(var n="",s=0;s<e.length;++s){var i=jSmart.prototype.PHPJS("ord","escape").ord(e.substr(s,1));n+=i>=126?"&#"+i+";":e.substr(s,1)}return n;case"javascript":return e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/<\//g,"</")}return e}),jSmart.prototype.registerPlugin("modifier","indent",function(e,r,t){e=new String(e),r=r||4,t=t||" ";for(var a="";r--;)a+=t;var n=e.match(/\n+$/);return a+e.replace(/\n+$/,"").replace(/\n/g,"\n"+a)+(n?n[0]:"")}),jSmart.prototype.registerPlugin("modifier","lower",function(e){return new String(e).toLowerCase()}),jSmart.prototype.registerPlugin("modifier","nl2br",function(e){return new String(e).replace(/\n/g,"<br />\n")}),jSmart.prototype.registerPlugin("modifier","regex_replace",function(e,r,t){var a=r.match(/^ *\/(.*)\/(.*) *$/);return new String(e).replace(new RegExp(a[1],"g"+(a.length>1?a[2]:"")),t)}),jSmart.prototype.registerPlugin("modifier","replace",function(e,r,t){if(!r)return e;e=new String(e),r=new String(r),t=new String(t);var a="",n=-1;for(n=e.indexOf(r);n>=0;n=e.indexOf(r))a+=e.slice(0,n)+t,n+=r.length,e=e.slice(n);return a+e}),jSmart.prototype.registerPlugin("modifier","spacify",function(e,r){return r||(r=" "),new String(e).replace(/(\n|.)(?!$)/g,"$1"+r)}),jSmart.prototype.registerPlugin("modifier","noprint",function(e){return""}),jSmart.prototype.registerPlugin("modifier","string_format",function(e,r){return jSmart.prototype.PHPJS("sprintf","string_format").sprintf(r,e)}),jSmart.prototype.registerPlugin("modifier","strip",function(e,r){return r=r||" ",new String(e).replace(/[\s]+/g,r)}),jSmart.prototype.registerPlugin("modifier","strip_tags",function(e,r,t){if(null==r&&(r=!0),t||1!=r&&0!=r&&(r+"").length>0&&(t=r,r=!0),t){var a=t.split(">");return a.splice(-1,1),e=new String(e).replace(/<[^>]*?>/g,function(e,t,n){for(var s=e.match(/\w+/),i=0;i<a.length;i++){var o=(a[i]+">").match(/\w+/);if(s[0]==o[0])return e}return r?" ":""})}return new String(e).replace(/<[^>]*?>/g,r?" ":"")}),jSmart.prototype.registerPlugin("modifier","truncate",function(e,r,t,a,n){return e=new String(e),r=r||80,t=null!=t?t:"...",e.length<=r?e:(r-=Math.min(r,t.length),n?e.slice(0,Math.floor(r/2))+t+e.slice(e.length-Math.floor(r/2)):(a||(e=e.slice(0,r+1).replace(/\s+?(\S+)?$/,"")),e.slice(0,r)+t))}),jSmart.prototype.registerPlugin("modifier","upper",function(e){return new String(e).toUpperCase()}),jSmart.prototype.registerPlugin("modifier","wordwrap",function(e,r,t,a){r=r||80,t=t||"\n";for(var n=new String(e).split("\n"),s=0;s<n.length;++s){for(var i=n[s],o="";i.length>r;){for(var p=0,l=i.slice(p).match(/\s+/);l&&p+l.index<=r;l=i.slice(p).match(/\s+/))p+=l.index+l[0].length;p=p||(a?r:l?l.index+l[0].length:i.length),o+=i.slice(0,p).replace(/\s+$/,""),p<i.length&&(o+=t),i=i.slice(p)}n[s]=o+i}return n.join("\n")}),String.prototype.fetch=function(e){return new jSmart(this).fetch(e)},"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=jSmart:("undefined"!=typeof global&&(global.jSmart=jSmart),"function"==typeof define&&define.amd&&define("jSmart",[],function(){return jSmart}))}();